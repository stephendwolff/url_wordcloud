$(document).ready(function(){if(!window.console){window.console={}}if(!window.console.log){window.console.log=function(){}}var a=$("#urlform");a.on("submit",function(){newURL($(this));return false});a.on("keypress",function(b){if(b.keyCode===13){newURL($(this));return false}});$("#url_for_wordcloud").select();updater.start()});function getCookie(a){var b=document.cookie.match("\\b"+a+"=([^;]*)\\b");return b?b[1]:undefined}function newURL(b){$("#spinner").show();$("#sending_error").text("");var c=$("#url_for_wordcloud").val();var a={_xsrf:getCookie("_xsrf"),url_for_wordcloud:c};updater.socket.send(JSON.stringify(a));b.find("input[type=text]").val("").select()}var updater={socket:null,start:function(){var a="ws://"+location.host+"/analyse_url/";updater.socket=new WebSocket(a);updater.socket.onmessage=function(c){var b=JSON.parse(c.data);var d=$("#sending_error");$("#spinner").hide();if(b.error!==undefined){d.text(" . . . "+b.error);d.show()}else{d.hide();updater.showWordCloud(b)}};$("#websocket_connection").html('<i class="fas fa-check-square"></i> Connected')},showWordCloud:function(a){updateTags(a)}};